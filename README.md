# TRC AI Front End

This project provides an interface for the Reward Collection tools. Files for the Knowledge Base are stored in Supabase Storage.

## Supabase Setup

1. [Create a Supabase project](https://supabase.com/).
2. In your project, create a bucket named `knowledge_base` and make it
   **public**. Upload your documents directly into this bucket using the
   Supabase dashboard or API. The Knowledge Base page automatically fetches the
   current file list from Supabase.
3. Copy your project URL and anon key from the Supabase dashboard.
4. Create a `.env.local` file in this repo and set:
   ```
   NEXT_PUBLIC_SUPABASE_URL=your-project-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   OPENAI_API_KEY=your-openai-key
   ```
5. Create the table used to store extracted text:
   ```sql
   create table public.knowledge_base_entries (
     id bigint generated by default as identity primary key,
     uploaded_at timestamp with time zone not null default now(),
     file_name text,
     file_url text,
     file_type text,
     extracted_text text
   );
   ```
6. Enable Row Level Security and add policies allowing inserts/selects for anonymous users on `knowledge_base` and `knowledge_base_entries`.
7. Install dependencies and run the development server:
   ```
   npm install
   npm run dev
   ```

The Knowledge Base page lists the files stored in your `knowledge_base` bucket
by calling an API route that retrieves file names from Supabase. Add new files
directly in Supabase; once uploaded they appear automatically on the site.

The home page includes a Draft Reply tool that can generate email responses. Use the **Tone Enhancer** dropdown to tailor the reply for roles such as Sales, Account Manager or Legal.
